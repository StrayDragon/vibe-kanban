# Environment Variables (Generated)

This file is generated by `pnpm run generate-env-docs`. Do not edit it by hand.

Notes:
- Defaults reflect code defaults; some values are only used when the env var is set.
- Lowering workspace TTL can delete uncommitted worktree changes; use with care.

## Build

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `POSTHOG_API_ENDPOINT` | string | unset | build | PostHog API endpoint (build-time, embedded into the server binary). |
| `POSTHOG_API_KEY` | string | unset | build | PostHog API key (build-time, embedded into the server binary). |
| `VK_SHARED_API_BASE` | string | unset | build | Optional shared API base URL embedded at build time (used by the server build script). |

## Cache budgets

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `VK_APPROVALS_COMPLETED_TTL_SECS` | duration-secs | 86400 (24h) | server | TTL for completed approvals cache. |
| `VK_CACHE_WARN_AT_RATIO` | float | 0.9 | server | Warn when cache usage reaches this ratio of the configured maximum. |
| `VK_CACHE_WARN_SAMPLE_SECS` | duration-secs | 300 (5m) | server | Minimum interval between repeated cache warnings. |
| `VK_FILE_SEARCH_CACHE_MAX_REPOS` | int | 25 | server | Maximum repos tracked in the file search cache. |
| `VK_FILE_SEARCH_CACHE_TTL_SECS` | duration-secs | 3600 (1h) | server | TTL for file search cache entries. |
| `VK_FILE_SEARCH_MAX_FILES` | int | 200000 | server | Maximum file count considered during file search indexing. |
| `VK_FILE_SEARCH_WATCHER_TTL_SECS` | duration-secs | 21600 (6h) | server | TTL for file watcher entries. |
| `VK_FILE_SEARCH_WATCHERS_MAX` | int | 25 | server | Maximum active file watchers. |
| `VK_FILE_STATS_CACHE_MAX_REPOS` | int | 25 | server | Maximum repos tracked in the file stats cache. |
| `VK_FILE_STATS_CACHE_TTL_SECS` | duration-secs | 3600 (1h) | server | TTL for file stats cache entries. |
| `VK_QUEUED_MESSAGES_TTL_SECS` | duration-secs | 86400 (24h) | server | TTL for queued messages. |

## Dev frontend

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `BACKEND_HOST` | string | 127.0.0.1 | frontend | Host for the Vite dev proxy to reach the backend (used with BACKEND_PORT). |
| `FRONTEND_PORT` | int | 3000 | dev, frontend | Port used by `pnpm run frontend:dev` and `pnpm run dev`. |
| `VITE_OPEN` | bool | false | frontend | When true, Vite dev server opens a browser window. |
| `VITE_PARENT_ORIGIN` | string | unset | frontend | Optional parent origin used by the embedded VS Code bridge integration. |
| `VITE_SOURCEMAP` | bool | false | frontend | When true, Vite builds/generates source maps. |

## Executor env (set by Vibe Kanban)

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `VK_PROJECT_ID` | uuid | dynamic | executors | Injected into executor processes to identify the project id. |
| `VK_PROJECT_NAME` | string | dynamic | executors | Injected into executor processes to identify the project name. |
| `VK_TASK_ID` | uuid | dynamic | executors | Injected into executor processes to identify the task id. |
| `VK_WORKSPACE_BRANCH` | string | dynamic | executors | Injected into executor processes to identify the workspace branch name. |
| `VK_WORKSPACE_ID` | uuid | dynamic | executors | Injected into executor processes to identify the workspace id. |

## Fake agent

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `VIBE_FAKE_AGENT_CONFIG` | path | unset | executors | Path to a fake-agent scenario/config file. |
| `VIBE_FAKE_AGENT_PATH` | path | unset | executors | Path override for the fake-agent executable used for local reproducible runs. |

## Idempotency

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `VK_IDEMPOTENCY_COMPLETED_TTL_SECS` | duration-secs | 604800 (7d) | server | TTL for completed idempotency keys. Set to 0 to disable pruning. |
| `VK_IDEMPOTENCY_IN_PROGRESS_TTL_SECS` | duration-secs | 3600 (1h) | server | TTL for stale in-progress idempotency keys. Set to 0 to disable stale cleanup. |

## Logs

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `VK_LEGACY_JSONL_RETENTION_DAYS` | int | 14 | server | Retention window for legacy JSONL logs. Values <= 0 disable cleanup. |
| `VK_LOG_BACKFILL_COMPLETION_MAX_ENTRIES` | int | 10000 | server | In-memory cache size for log backfill completion tracking (entries). |
| `VK_LOG_BACKFILL_COMPLETION_TTL_SECS` | duration-secs | 86400 (24h) | server | TTL for log backfill completion tracking cache. |
| `VK_LOG_BACKFILL_CONCURRENCY` | int | 4 | server | Concurrency for log backfill jobs. |
| `VK_LOG_HISTORY_MAX_BYTES` | int | 8388608 (8 MiB) | server | Maximum in-memory log history size per MsgStore (bytes). Values of 0 are normalized to 1. |
| `VK_LOG_HISTORY_MAX_ENTRIES` | int | 5000 | server | Maximum in-memory log history entries per MsgStore. Values of 0 are normalized to 1. |
| `VK_LOG_PERSISTENCE_MODE` | string | auto | server | Controls log persistence backend ('auto' | 'log_entries' | 'legacy_jsonl'). |
| `VK_NORMALIZED_LOG_HISTORY_PAGE_SIZE` | int | 20 | server | Default page size for normalized log history v2 endpoints. |
| `VK_RAW_LOG_HISTORY_PAGE_SIZE` | int | 200 | server | Default page size for raw log history v2 endpoints. |

## MCP

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `VIBE_BACKEND_URL` | string | unset | mcp_task_server | Backend base URL for the MCP task server (overrides HOST/BACKEND_PORT/port file discovery). |

## Server

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `BACKEND_PORT` | int | 0 (auto-assign if unset) | server, mcp_task_server | Preferred port for the backend HTTP server. Falls back to PORT when unset. |
| `HOST` | string | 127.0.0.1 | server, mcp_task_server | Bind address for the backend HTTP server. |
| `PORT` | int | 0 (auto-assign if unset) | server, mcp_task_server | Fallback alias for BACKEND_PORT. |
| `RUST_LOG` | string | info | server | Controls module log levels. Used to build the tracing filter for the backend. |

## Storage

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `DATABASE_URL` | string | sqlite://<asset_dir>/db.sqlite?mode=rwc | server | SQLite database URL. Only sqlite URLs are supported. When unset, defaults under VIBE_ASSET_DIR. |
| `VIBE_ASSET_DIR` | path | dev_assets/ (debug) or OS app data dir (release) | server, local-deployment | Overrides the asset directory used for config, credentials, and the SQLite database. |
| `VIBE_DB_RESET_ON_MIGRATION_ERROR` | bool | false | server | When true, resets the local SQLite DB files on migration error (destructive). |

## Translation

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `KANBAN_OPENAI_API_BASE` | string | unset | server | OpenAI-compatible base URL for translation. |
| `KANBAN_OPENAI_API_KEY` | string | unset | server | API key for translation. |
| `KANBAN_OPENAI_DEFAULT_MODEL` | string | unset | server | Default model name for translation. |
| `OPENAI_API_BASE` | string | unset | server | Fallback translation base URL (used only when KANBAN_OPENAI_API_BASE is unset). |
| `OPENAI_API_KEY` | string | unset | server | Fallback translation API key (used only when KANBAN_OPENAI_API_KEY is unset). |
| `OPENAI_DEFAULT_MODEL` | string | unset | server | Fallback translation default model (used only when KANBAN_OPENAI_DEFAULT_MODEL is unset). |

## Workspace cleanup

| Name | Type | Default | Applies to | Description |
| --- | --- | --- | --- | --- |
| `DISABLE_WORKSPACE_EXPIRED_CLEANUP` | bool (presence) | unset | local-deployment | When set, disables TTL-based expired workspace cleanup (orphan cleanup remains separately controlled). |
| `DISABLE_WORKTREE_ORPHAN_CLEANUP` | bool (presence) | unset | local-deployment | When set, disables orphan workspace cleanup on disk. |
| `VK_WORKSPACE_CLEANUP_INTERVAL_SECS` | duration-secs | 1800 (30m) | local-deployment | Tick interval for the periodic workspace cleanup loop. |
| `VK_WORKSPACE_EXPIRED_TTL_SECS` | duration-secs | 259200 (72h) | local-deployment | TTL threshold for expired workspaces. Workspaces older than this and without running processes are eligible for cleanup. |

## Sources

The list below shows where each env var name appears in the repo (best-effort).

- `BACKEND_HOST`: `frontend/vite.config.ts`
- `BACKEND_PORT`: `crates/server/src/bin/mcp_task_server.rs`, `crates/server/src/main.rs`, `crates/server/src/mcp/task_server.rs`, `frontend/vite.config.ts`, `package.json`
- `DATABASE_URL`: `crates/db/src/lib.rs`, `crates/server/src/test_support.rs`, `scripts/prepare-db.js`
- `DISABLE_WORKSPACE_EXPIRED_CLEANUP`: `crates/local-deployment/src/container.rs`
- `DISABLE_WORKTREE_ORPHAN_CLEANUP`: `crates/services/src/services/workspace_manager.rs`, `package.json`
- `FRONTEND_PORT`: `frontend/vite.config.ts`, `package.json`
- `HOST`: `crates/server/src/bin/mcp_task_server.rs`, `crates/server/src/http/mod.rs`, `crates/server/src/main.rs`, `justfile`
- `KANBAN_OPENAI_API_BASE`: `crates/server/src/routes/translation.rs`
- `KANBAN_OPENAI_API_KEY`: `crates/server/src/routes/translation.rs`
- `KANBAN_OPENAI_DEFAULT_MODEL`: `crates/server/src/routes/translation.rs`
- `OPENAI_API_BASE`: `crates/server/src/routes/translation.rs`
- `OPENAI_API_KEY`: `crates/server/src/routes/translation.rs`
- `OPENAI_DEFAULT_MODEL`: `crates/server/src/routes/translation.rs`
- `PORT`: `crates/server/src/bin/mcp_task_server.rs`, `crates/server/src/main.rs`, `justfile`, `scripts/setup-dev-environment.js`
- `POSTHOG_API_ENDPOINT`: `crates/server/build.rs`
- `POSTHOG_API_KEY`: `crates/server/build.rs`
- `RUST_LOG`: `crates/executors/src/executors/codex.rs`, `crates/server/src/main.rs`, `package.json`
- `VIBE_ASSET_DIR`: `crates/server/src/test_support.rs`, `crates/utils/src/assets.rs`
- `VIBE_BACKEND_URL`: `crates/server/src/bin/mcp_task_server.rs`, `crates/server/src/mcp/task_server.rs`
- `VIBE_DB_RESET_ON_MIGRATION_ERROR`: `crates/db/src/lib.rs`
- `VIBE_FAKE_AGENT_CONFIG`: `crates/executors/src/executors/fake_agent.rs`
- `VIBE_FAKE_AGENT_PATH`: `crates/executors/src/executors/fake_agent.rs`
- `VITE_OPEN`: `frontend/package.json`, `frontend/vite.config.ts`
- `VITE_PARENT_ORIGIN`: `frontend/src/utils/StyleOverride.tsx`
- `VITE_SOURCEMAP`: `frontend/vite.config.ts`
- `VK_APPROVALS_COMPLETED_TTL_SECS`: `crates/services/src/services/cache_budget.rs`
- `VK_CACHE_WARN_AT_RATIO`: `crates/services/src/services/cache_budget.rs`
- `VK_CACHE_WARN_SAMPLE_SECS`: `crates/services/src/services/cache_budget.rs`
- `VK_FILE_SEARCH_CACHE_MAX_REPOS`: `crates/services/src/services/cache_budget.rs`
- `VK_FILE_SEARCH_CACHE_TTL_SECS`: `crates/services/src/services/cache_budget.rs`
- `VK_FILE_SEARCH_MAX_FILES`: `crates/services/src/services/cache_budget.rs`
- `VK_FILE_SEARCH_WATCHER_TTL_SECS`: `crates/services/src/services/cache_budget.rs`
- `VK_FILE_SEARCH_WATCHERS_MAX`: `crates/services/src/services/cache_budget.rs`
- `VK_FILE_STATS_CACHE_MAX_REPOS`: `crates/services/src/services/cache_budget.rs`
- `VK_FILE_STATS_CACHE_TTL_SECS`: `crates/services/src/services/cache_budget.rs`
- `VK_IDEMPOTENCY_COMPLETED_TTL_SECS`: `crates/server/src/main.rs`
- `VK_IDEMPOTENCY_IN_PROGRESS_TTL_SECS`: `crates/server/src/main.rs`, `crates/server/src/routes/idempotency.rs`
- `VK_LEGACY_JSONL_RETENTION_DAYS`: `crates/services/src/services/container/mod.rs`
- `VK_LOG_BACKFILL_COMPLETION_MAX_ENTRIES`: `crates/services/src/services/cache_budget.rs`
- `VK_LOG_BACKFILL_COMPLETION_TTL_SECS`: `crates/services/src/services/cache_budget.rs`
- `VK_LOG_BACKFILL_CONCURRENCY`: `crates/services/src/services/container/mod.rs`
- `VK_LOG_HISTORY_MAX_BYTES`: `crates/utils/src/msg_store.rs`
- `VK_LOG_HISTORY_MAX_ENTRIES`: `crates/utils/src/msg_store.rs`
- `VK_LOG_PERSISTENCE_MODE`: `crates/services/src/services/container/mod.rs`
- `VK_NORMALIZED_LOG_HISTORY_PAGE_SIZE`: `crates/server/src/routes/execution_processes.rs`
- `VK_PROJECT_ID`: `crates/local-deployment/src/container.rs`
- `VK_PROJECT_NAME`: `crates/executors/src/env.rs`, `crates/local-deployment/src/container.rs`
- `VK_QUEUED_MESSAGES_TTL_SECS`: `crates/services/src/services/cache_budget.rs`
- `VK_RAW_LOG_HISTORY_PAGE_SIZE`: `crates/server/src/routes/execution_processes.rs`
- `VK_SHARED_API_BASE`: `crates/server/build.rs`
- `VK_TASK_ID`: `crates/local-deployment/src/container.rs`
- `VK_WORKSPACE_BRANCH`: `crates/local-deployment/src/container.rs`
- `VK_WORKSPACE_CLEANUP_INTERVAL_SECS`: `crates/local-deployment/src/container.rs`
- `VK_WORKSPACE_EXPIRED_TTL_SECS`: `crates/local-deployment/src/container.rs`
- `VK_WORKSPACE_ID`: `crates/local-deployment/src/container.rs`
